<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <link rel="stylesheet" href="juego.css" />
</head>

<body>
    <audio controls autoplay>
        <source src="https://www.cjoint.com/doc/21_11/KKlpuYeXeLT_TRENO2.0.mp3" type="audio/mpeg">
    </audio>
    <h1 id="titulo">Hola Mundo</h1>
    <div id="bannerRotarTelefono" class="esconder">
        <div>Usa tu teléfono en modo vertical para jugar</div>
        <button id="botonCerrarBanner">OK</button>
    </div>
    <div id="contenedorJuego">
        <div id="contenedorNintendo">
            <div id="puntos">PUNTOS: 0</div>
            <div id="juegoOverlay">
                <img id="nintendo" src="nintendo.png" />
                <canvas id="juegoCanvas" width="600" height="600"></canvas>
            </div>
        </div>
    </div>
    <script src="culebrita.js"></script>
</body>

</html>

body { background-color: rgb(12, 56, 189); font-family: "Trebuchet MS", Helvetica, sans-serif; margin: 0; height: 100%; overflow: hidden; font-size: 0px; touch-action: none; } #titulo { color: rgb(0, 0, 0); margin-left: 30px; margin-top: 10px; margin-bottom:
10px; } .esconder { display: none !important; } #bannerRotarTelefono { display: flex; flex-direction: row; justify-content: space-around; align-items: center; background-color: rgb(201, 137, 116); color: rgb(243, 23, 23); padding: 10px; margin-bottom:
5px; } #botonCerrarBanner { border-style: solid; border-width: 1px; border-color: rgb(212, 37, 37); border-radius: 5px; background-color: rgb(224, 120, 82); color: white; padding: 6px; } #puntos { color: rgb(0, 0, 0); margin-left: 40px; margin-bottom:
5px; } #contenedorJuego { display: flex; flex-direction: column; align-items: center; } #contenedorNintendo { width: 94%; display: flex; flex-direction: column; } #juegoOverlay { position: relative; } #juegoCanvas { position: absolute; left: 16.9%; top:
5.19%; width: 73.8%; background-color: #4dc728; } #nintendo { width: 100%; } @media screen and (min-width: 768px) { #contenedorNintendo { width: 65%; } body { font-size: 20px; } } @media screen and (min-width: 1024px) { #contenedorNintendo { width: 50%;
} body { font-size: 22px; } } @media screen and (min-width: 1280px) { #contenedorNintendo { width: 35%; } body { font-size: 24px; } } .shake-horizontal { -webkit-animation: shake-horizontal 0.8s cubic-bezier(0.455, 0.03, 0.515, 0.955) both; animation:
shake-horizontal 0.8s cubic-bezier(0.455, 0.03, 0.515, 0.955) both; } /* ---------------------------------------------- * Generated by Animista on 2020-10-24 16:9:50 * Licensed under FreeBSD License. * See http://animista.net/license for more info. *
w: http://animista.net, t: @cssanimista * ---------------------------------------------- */ /** * ---------------------------------------- * animation shake-horizontal * ---------------------------------------- */ @-webkit-keyframes shake-horizontal {
0%, 100% { -webkit-transform: translateX(0); transform: translateX(0); } 10%, 30%, 50%, 70% { -webkit-transform: translateX(-10px); transform: translateX(-10px); } 20%, 40%, 60% { -webkit-transform: translateX(10px); transform: translateX(10px); } 80%
{ -webkit-transform: translateX(8px); transform: translateX(8px); } 90% { -webkit-transform: translateX(-8px); transform: translateX(-8px); } } @keyframes shake-horizontal { 0%, 100% { -webkit-transform: translateX(0); transform: translateX(0); } 10%,
30%, 50%, 70% { -webkit-transform: translateX(-10px); transform: translateX(-10px); } 20%, 40%, 60% { -webkit-transform: translateX(10px); transform: translateX(10px); } 80% { -webkit-transform: translateX(8px); transform: translateX(8px); } 90% { -webkit-transform:
translateX(-8px); transform: translateX(-8px); } } /** Constantes **/ let DIRECCIONES = { ARRIBA: 1, ABAJO: 2, IZQUIERDA: 3, DERECHA: 4, }; let FPS = 1000 / 15; let JUEGO_CANVAS = document.getElementById("juegoCanvas"); let CTX = JUEGO_CANVAS.getContext("2d");
let CONTENEDOR_NINTENDO = document.getElementById("contenedorNintendo"); let PUNTOS_TEXTO = document.getElementById("puntos"); let BANNER_ROTAR_TELEFONO = document.getElementById("bannerRotarTelefono"); let TITULO = document.getElementById("titulo");
let BOTON_CERRAR_BANNER = document.getElementById("botonCerrarBanner"); let SONIDO_GANASTE_PUNTO = new Audio("ganaste_un_punto.wav"); let CSS_CLASE_SACUDIR_HORIZONTALMENTE = "shake-horizontal"; let CSS_CLASE_ESCONDER = "esconder"; /** Estado del juego
**/ let culebra; let direccionActual; let nuevaDireccion; let comida; let ciclo; let puntos; /** Dibujar **/ function rellenarCuadrado(context, posX, posY) { context.beginPath(); context.fillStyle = "#2e490b"; context.fillRect(posX, posY, 20, 20); context.stroke();
} function dibujarCulebra(context, culebra) { for (let i = 0; i
< culebra.length; i++) { rellenarCuadrado(context, culebra[i].posX, culebra[i].posY); } } function dibujarComida(context, comida) { rellenarCuadrado(context, comida.posX, comida.posY); }
    function dibujarParedes(context) { context.beginPath(); context.lineWidth="2" ; context.rect(20, 20, 560, 560); context.stroke(); } function dibujarTexto(context, texto, x, y) { context.font="38px Arial" ; context.textAlign="center" ; context.fillStyle="black"
    ; context.fillText(texto, x, y); } /** Culebra **/ function moverCulebra(direccion, culebra) { let cabezaPosX=c ulebra[0].posX; let cabezaPosY=c ulebra[0].posY; if (direccion===D IRECCIONES.DERECHA) { cabezaPosX +=2 0; } else if (direccion===D IRECCIONES.IZQUIERDA)
    { cabezaPosX -=2 0; } else if (direccion===D IRECCIONES.ABAJO) { cabezaPosY +=2 0; } else if (direccion===D IRECCIONES.ARRIBA) { cabezaPosY -=2 0; } // Agregamos la nueva cabeza al principio de la lista culebra.unshift({ posX: cabezaPosX, posY: cabezaPosY
    }); // Borramos la cola de la culebra return culebra.pop(); // { posX, posY } } function culebraComioComida(culebra, comida) { return culebra[0].posX===c omida.posX && culebra[0].posY===c omida.posY; } /** Comida **/ function generarNuevaPosicionDeComida(culebra)
    { while (true) { // 0 <=M ath.random() < 1 let columnaX=M ath.max(Math.floor(Math.random() * 29), 1); let columnaY=M ath.max(Math.floor(Math.random() * 29), 1); let posX=c olumnaX * 20; let posY=c olumnaY * 20; let colisionConCulebra=f alse; for (let
    i=0 ; i < culebra.length; i++) { if (culebra[i].posX===p osX && culebra[i].posY===p osY) { colisionConCulebra=t rue; break; } } if (colisionConCulebra===t rue) { continue; } return { posX: posX, posY: posY }; } } /** Colisiones **/ function ocurrioColision(culebra)
    { let cabeza=c ulebra[0]; if ( cabeza.posX < 20 || cabeza.posY < 20 || cabeza.posX>= 580 || cabeza.posY >= 580 ) { return true; } if (culebra.length === 1) { return false; } for (let i = 1; i
    < culebra.length; i++) { if (cabeza.posX===c ulebra[i].posX && cabeza.posY===c ulebra[i].posY) { return true; } } return false; } /** Puntaje
        **/ function mostrarPuntos(puntos) { PUNTOS_TEXTO.innerText="PUNTOS: " + puntos; } function incrementarPuntaje() { puntos++; mostrarPuntos(puntos); SONIDO_GANASTE_PUNTO.play(); } /** Responsive **/ window.addEventListener( "orientationchange", function()
        { TITULO.classList.add(CSS_CLASE_ESCONDER); BANNER_ROTAR_TELEFONO.classList.remove(CSS_CLASE_ESCONDER); }); BOTON_CERRAR_BANNER.addEventListener( "click", function() { TITULO.classList.remove(CSS_CLASE_ESCONDER); BANNER_ROTAR_TELEFONO.classList.add(CSS_CLASE_ESCONDER);
        }); /** Ciclo de Juego **/ document.addEventListener( "keydown", function(e) { if (e.code==="ArrowUp" && direccionActual !==D IRECCIONES.ABAJO) { nuevaDireccion=D IRECCIONES.ARRIBA; } else if (e.code==="ArrowDown" && direccionActual !==D IRECCIONES.ARRIBA)
        { nuevaDireccion=D IRECCIONES.ABAJO; } else if ( e.code==="ArrowLeft" && direccionActual !==D IRECCIONES.DERECHA ) { nuevaDireccion=D IRECCIONES.IZQUIERDA; } else if ( e.code==="ArrowRight" && direccionActual !==D IRECCIONES.IZQUIERDA ) { nuevaDireccion=D
        IRECCIONES.DERECHA; } }); function cicloDeJuego() { let colaDescartada=m overCulebra(nuevaDireccion, culebra); direccionActual=n uevaDireccion; if (culebraComioComida(culebra, comida)) { culebra.push(colaDescartada); comida=g enerarNuevaPosicionDeComida(culebra);
        incrementarPuntaje(); } if (ocurrioColision(culebra)) { gameOver(); return; } CTX.clearRect(0, 0, 600, 600); dibujarParedes(CTX); dibujarCulebra(CTX, culebra); dibujarComida(CTX, comida); } function gameOver() { clearInterval(ciclo); ciclo=u ndefined;
        dibujarTexto(CTX, "¡Fin del Juego!", 300, 260); dibujarTexto(CTX, "Click para volver a jugar", 300, 310); CONTENEDOR_NINTENDO.classList.add(CSS_CLASE_SACUDIR_HORIZONTALMENTE); } function empezarJuego() { culebra=[ { posX: 60, posY: 20 }, { posX: 40,
        posY: 20 }, { posX: 20, posY: 20 }, ]; direccionActual=D IRECCIONES.DERECHA; nuevaDireccion=D IRECCIONES.DERECHA; comida=g enerarNuevaPosicionDeComida(culebra); puntos=0 ; mostrarPuntos(puntos); CONTENEDOR_NINTENDO.classList.remove(CSS_CLASE_SACUDIR_HORIZONTALMENTE);
        ciclo=s etInterval(cicloDeJuego, FPS); } dibujarParedes(CTX); dibujarTexto(CTX, "¡Click para empezar!", 300, 260); dibujarTexto(CTX, "Desktop: Muévete con ↑ ↓ → ←", 300, 310); dibujarTexto(CTX, "Móbil: Tap para girar la culebra", 300, 360); JUEGO_CANVAS.addEventListener(
        "click", function() { if (ciclo===u ndefined) { empezarJuego(); return; } if (direccionActual===D IRECCIONES.ABAJO) { nuevaDireccion=D IRECCIONES.IZQUIERDA; } else if (direccionActual===D IRECCIONES.IZQUIERDA) { nuevaDireccion=D IRECCIONES.ARRIBA; } else
        if (direccionActual===D IRECCIONES.ARRIBA) { nuevaDireccion=D IRECCIONES.DERECHA; } else if (direccionActual===D IRECCIONES.DERECHA) { nuevaDireccion=D IRECCIONES.ABAJO; } });